<html>
<head>
<title>CSS/HTML: Retrieving ELement Under the Mouse</title>
<script language="Javascript">
<!--
///////////////////////////////////////
// F. Permadi 2005
///////////////////////////////////////
function mouseEventHandler(mEvent)
{
	// Internet Explorer
	if (mEvent.srcElement)
	{
		showPopup(mEvent, 'linkPopup', mEvent.srcElement);
	}
	// Netscape and Firefox
	else if (mEvent.target)
	{
		showPopup(mEvent, 'linkPopup', mEvent.target);
	}
}

function getPopupObject(myId)
{
   if (document.getElementById(myId))
   {
     return document.getElementById(myId);
   }
   else
   {
     return window.document[myId]; 
	}     
}

function showPopup(myEvent, id, myElement)
{
	var popup=getPopupObject(id);
	if (popup)
	{	
		popup.style.visibility='hidden';	
		var x=myEvent.clientX;
		var y=myEvent.clientY;
		x=parseInt(myEvent.clientX+document.body.scrollLeft);
		y=parseInt(myEvent.clientY+document.body.scrollTop);
		var popupText=getPopupObject(id+"Text");
		var text="<"+myElement.nodeName+">";
		if (myElement.id)
			text+=", id is: '"+myElement.id+"'";		
		if (myElement.parentNode)
			text+=", parent is: <"+myElement.parentNode.nodeName+">";
		popupText.firstChild.nodeValue=text;

		popup.style.left=x;
		popup.style.top=y;
	
		popup.style.visibility='visible';
	}
}
//-->
</SCRIPT>
</head>

<body onMouseMove="javaScript:mouseEventHandler(event);" bgcolor="#C0C0C0" text="#000000" link="#000080" vlink="#0000FF" alink="#000080">


<CENTER>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td bgcolor="#000000"><font color="#FFFFFF" face="Arial" size="1"><b>Advertisement</b></font></td>
  </tr>
  <tr>
    <td><center>

<p>&nbsp;<p>
</center>
</td>
  </tr>
</table>
</CENTER>

<!-- this is a popup bubble element, it's a div square with width=100-->
<!-- a table is encosed within the DIV, otherwise in Firefox 1, the height of the the DIV would not span more than 1 line of text-->
<DIV ID="linkPopup" STYLE="position: absolute; top: 0; left: 0; width:300px; z-index: 9000; 
	text-decoration: none; visibility:hidden;"><TABLE BGCOLOR="#CCCC00" BORDER=1 bordercolor="#888888">
	<!-- here we have a table cell, which will hold the text.  No need to specify table dimension so that -->
	<!-- the table will expand automatically to fir the text -->
	<!-- Do not put a DIV inside the cell, that will not work on Firefox 1-->
	<TR><TD STYLE="color:white;" ID="linkPopupText">Popup text</TD></TR></TABLE>
  </DIV>
<table border="1" cellpadding="0" cellspacing="0" bordercolor="#000000" ALIGN="CENTER" width="640">
      <td bgcolor="#0099CC" align="center">
        &nbsp;&nbsp;<br>
        <img border="0" src="../images/header_css.gif" width="204" height="54">
        <div align="center">
          <center>
      <table border="0" bgcolor="#FFFFFF" cellspacing="0" cellpadding="0">

  <tr>
    <td bgcolor="#000000" align="center">
      &nbsp;
    </td>
    <td bgcolor="#000000" align="center">
      <b><font color="#FFFFFF">CSS: RETRIEVING THE ELEMENT UNDER THE MOUSE</font></b>
    </td>
    <td bgcolor="#000000" align="center">
      &nbsp;
    </td>
  </tr>
    </center>
  <tr>
    <td valign="top" align="left" bgcolor="#FFFFFF">
  <img border="0" src="../../images/shim.gif" width="35" height="35">
    </td>
    <td valign="top" align="left" bgcolor="#FFFFFF">
  
  <br>
  
  <p><font color="#FF0000"><b>Writing a mouse event handler function.<br>
  </b></font><font color="#000000">A mouse event handler function will be called whenever a certain mouse event is happening.&nbsp;</p>
  
  <p><font color="#FF0000"><b>Assigning the event handler function<br>
  </b></font><font color="#000000">Assigning an event handler allows us to
  'intercept' certain events and do something as a response to the event.&nbsp;
  <br>
  In this
  example, I am&nbsp;assigning the function so that I can intercept mouse downs </font><font color="#000000">(<b>onMouseDown</b>)
  </font><font color="#000000">anywhere within the <b>&lt;BODY&gt;</b>
  element.&nbsp; This means that if you click on any element inside the <b>&lt;BODY&gt;</b>,
  the event handler will be executed.&nbsp;&nbsp;</font></p>
  <table border="0" width="100%" bgcolor="#FFFFCC">
    <tr>
      <td width="100%">
        <pre><font color="#800000">&lt;body onMouseDown=&quot;javaScript:mouseEventHandler(event);&quot;&gt;</font></pre>
      </td>
    </tr>
  </table>
  <p><font color="#000000">Note that you can assign the event handler to any
  valid elements.&nbsp;&nbsp;</font></p>
  <p><font color="#FF0000"><b>Retrieving the element</b></font><font color="#000000"><br>
  As mentioned earlier, </font><font color="#000000">whenever
  an event is fired, an <b>event</b> object is passed implicitly to the event handler.&nbsp; For starter, the sample code
  below prints the <b>nodeName</b> of the element (<b>nodeName</b> is the html
  tag of the element, such as &quot;IMG&quot;, &quot;TABLE&quot;,
  &quot;INPUT&quot;, etc):&nbsp;&nbsp;</font></p>

  
  <table border="1" width="100%" bgcolor="#CCFFFF">
    <tr>
      <td width="33%">element.nodeName</td>
      <td width="67%">A string containing the tag of the element, such as
        &quot;TABLE&quot;, &quot;DIV&quot;, &quot;IMG&quot;, etc.&nbsp;&nbsp;</td>
    </tr>
    <tr>
      <td width="33%">element.parentNode</td>
      <td width="67%">An element which is the parent node of the element.&nbsp;
        For example, if you have &lt;TABLE&gt;&lt;TR&gt;&lt;TD&gt;cell&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;,
        the parent of &lt;TD&gt; is the &lt;TR&gt;; and the parent of the &lt;TR&gt;
        is &lt;TABLE&gt;.</td>
    </tr>
    
  </table>
  
  
</center>	
	
</center>
</body>
</html>
